<?php

namespace DotAim\Images;

use DotAim\Base\Singleton;
use DotAim\F;

final class Images extends Singleton
{

	/* ===========================================================================
	 * ---------------------------------------------------------------------------
	 * INIT - START
	 * ---------------------------------------------------------------------------
	 * ======================================================================== */

	/**
	 * @since 1.0.0
	 */
	public function init()
	{

		$this->hooks();

	}
	// init()

	/* ===========================================================================
	 * ---------------------------------------------------------------------------
	 * INIT - END
	 * ---------------------------------------------------------------------------
	 * ======================================================================== */



	/* ===========================================================================
	 * ---------------------------------------------------------------------------
	 * HOOKS - START
	 * ---------------------------------------------------------------------------
	 * ======================================================================== */

	/**
	 * @since 1.0.0
	 */
	public function hooks()
	{

		if ( current_theme_supports('images') )
		{
			add_action( 'after_setup_theme', [ $this, 'after_setup_theme' ] );
		}

	}
	// hooks()



	/**
	 * @since 1.0.0
	 */
	public function after_setup_theme()
	{

		if ( $sizes = $this->sizes() )
		{
			foreach ( $sizes as $name => $size )
			{
				$width	= $size['width']	?? 0;
				$height	= $size['height']	?? 0;
				$crop		= $size['crop']		?? false;

				// ---------------------------------------------------------------------

				add_image_size( $name, $width, $height, $crop );
			}
		}

	}
	// after_setup_theme()

	/* ===========================================================================
	 * ---------------------------------------------------------------------------
	 * HOOKS - END
	 * ---------------------------------------------------------------------------
	 * ======================================================================== */



	/* ===========================================================================
	 * ---------------------------------------------------------------------------
	 * SIZES - START
	 * ---------------------------------------------------------------------------
	 * ======================================================================== */

	/**
	 * @since 1.0.0
	 */
	public function sizes()
	{

		$out = [

			"{$this->core->prefix}xl" => [
				'width'		=> 1280,
				'height'	=> 888,
				'crop'		=> true,
			],

			// -----------------------------------------------------------------------

			"{$this->core->prefix}lg" => [
				'width'		=> 640,
				'height'	=> 444,
				'crop'		=> true,
			],

			// -----------------------------------------------------------------------

			"{$this->core->prefix}md" => [
				'width'		=> 460,
				'height'	=> 320,
				'crop'		=> true,
			],

			// -----------------------------------------------------------------------

			"{$this->core->prefix}sm" => [
				'width'		=> 300,
				'height'	=> 210,
				'crop'		=> true,
			],

		];

		// -------------------------------------------------------------------------

		return $out;

	}
	// sizes()

	/* ===========================================================================
	 * ---------------------------------------------------------------------------
	 * SIZES - END
	 * ---------------------------------------------------------------------------
	 * ======================================================================== */

}
// class Images
